

{% assign guide = site.meta.guide %}
{% assign toolkits = site.meta.toolkits %}
{% assign program-areas = site.meta.program-areas %}
{% assign volunteer-projects = site.meta.volunteer-projects %}
{% assign community = site.meta.community %}
{% assign guide_entry_point = site.baseurl | append: '/guide/' %}
{% assign toolkits_entry_point = site.baseurl | append: '/toolkits/' %}
{% assign program-areas_entry_point = site.baseurl | append: '/program-areas/' %}
{% assign volunteer-projects_entry_point = site.baseurl | append: '/volunteer-projects/' %}
{% assign community_entry_point = site.baseurl | append: '/community/' %}




{% assign url_parts = page.url | split: '/' %}


{% if page.url contains 'guide'%}
  {% assign active_section = site.meta['guide'] %}
{% elsif page.url contains 'toolkits'%}
  {% assign active_section = site.meta['toolkit'] %}
{% endif %}




<header class="site-header">
  <a href="#menu" class="show-menu"><span class="text">Open the menu</span></a>
  <a class="site-title" href="{{ site.baseurl }}/">{{ site.short_title }}</a>
</header>

<nav id="menu">
  <ul>

    <li>
      <a href="{{ site.baseurl }}/">Home</a>
    </li>

    <li {% if page.url contains 'guide' %}class="Selected"{% endif %}>
      <a href="{{ guide_entry_point }}">Guide</a>

    <ul>

        <!-- start navigation for guide section -->
        {% for chapter in guide.toc.chapters %}
        {% assign chapter_url = site.baseurl | append:  '/guide/' | append: chapter.slug | append: '/' %}
        <li {% if page.url == chapter_url %}class="Selected"{% endif %}>
          <a href="{{ chapter_url }}">{{ chapter.title }}</a>
        </li>
        {% endfor %}
    </ul>

    <li {% if page.url contains 'program-areas/' %}class="Selected"{% endif %}>
      <a href="{{ program-areas_entry_point }}">Program Areas</a>

    <ul>

        <!-- start navigation for program-areas section -->
        {% for chapter in program-areas.toc.chapters %}
        {% assign chapter_url = site.baseurl | append:  '/program-areas/' | append: chapter.slug | append: '/' %}
        <li {% if page.url == chapter_url %}class="Selected"{% endif %}>
          <a href="{{ chapter_url }}">{{ chapter.title }}</a>
        </li>
        {% endfor %}
    </ul>

    <li {% if page.url contains 'toolkits' %}class="Selected"{% endif %}>
      <a href="{{ toolkits_entry_point }}">Toolkits</a>



    <li {% if page.url contains 'volunteer-projects' %}class="Selected"{% endif %}>
      <a href="{{ volunteer-projects_entry_point }}">Volunteer Projects</a>

    <ul>

        <!-- start navigation for volunteer-projects section -->
        {% for chapter in volunteer-projects.toc.chapters %}
        {% assign chapter_url = site.baseurl | append:  '/volunteer-projects/' | append: chapter.slug | append: '/' %}
        <li {% if page.url == chapter_url %}class="Selected"{% endif %}>
          <a href="{{ chapter_url }}">{{ chapter.title }}</a>
        </li>
        {% endfor %}
    </ul>



    <!-- start navigation for apps section -->
    <li class="apps-menu{% if page.url contains 'solutions' %} Selected{% endif %}">
      <a href="{{ apps_entry_point }}">Solutions</a>
      <ul class="app-sub-menu">
        <li class="search">
          <input type="search" placeholder="Search" class="quicksearch">
        </li>
        {% capture appproblems %}{% for page in site.pages %}{% if page.section == 'solutions' %}{% if page.problem %}{{ page.problem }},{% endif %}{% endif %}{% endfor %}{% endcapture %}
        {% if appproblems != '' %}
            {% assign appproblemsArray = appproblems | split: "," %}
            {% assign appproblemslist = appproblemsArray[1] %}
            {% for at in appproblemsArray %}
              {% unless appproblemslist contains at %}
                {% capture appproblemslist %}{{ appproblemslist }}@@{{ at }}{% endcapture %}
              {% endunless %}
            {% endfor %}
            {% assign appproblemssorted = appproblemslist | split: '@@' | sort %}

            <li class="problems filter active">
              <a>Problems</a>
              <span class="filter-items">
                {% for appproblem in appproblemssorted %}
                <a data-filter=".selector-problem-{{ appproblem | downcase | replace:' ','' }}" data-pid=".problem-{{ appproblem | downcase | replace:' ','' }}">{{ appproblem }}</a>
                {% endfor %}
              </span>
            </li>
        {% endif %}

        {% capture appthemes %}{% for page in site.pages %}{% if page.section == 'solutions' %}{% if page.themes %}{{ page.themes }},{% endif %}{% endif %}{% endfor %}{% endcapture %}
        {% if appthemes != '' %}
            {% assign appthemesArray = appthemes | split: "," %}
            {% assign appthemeslist = appthemesArray[1] %}
            {% for at in appthemesArray %}
              {% unless appthemeslist contains at %}
                {% capture appthemeslist %}{{ appthemeslist }}@@{{ at }}{% endcapture %}
              {% endunless %}
            {% endfor %}
            {% assign appthemessorted = appthemeslist | split: '@@' | sort %}

            <li class="filter">
              <a>Themes</a>
              <span class="filter-items">
                {% for apptheme in appthemessorted %}
                <a data-filter=".selector-theme-{{ apptheme | downcase | replace:' ','' }}">{{ apptheme }}</a>
                {% endfor %}
              </span>
            </li>
        {% endif %}

        {% capture apptags %}{% for page in site.pages %}{% if page.section == 'solutions' %}{% if page.tags %}{{ page.tags }},{% endif %}{% endif %}{% endfor %}{% endcapture %}
        {% if apptags != '' %}
            {% assign apptagsArray = apptags | split: "," %}
            {% assign apptagslist = apptagsArray[1] %}
            {% for at in apptagsArray %}
              {% unless apptagslist contains at %}
                {% capture apptagslist %}{{ apptagslist }}@@{{ at }}{% endcapture %}
              {% endunless %}
            {% endfor %}
            {% assign apptagssorted = apptagslist | split: '@@' | sort %}
        
            <li class="filter">
              <a>Tags</a>
              <span class="filter-items">
                {% for apptag in apptagssorted %}
                <a data-filter=".selector-tag-{{ apptag | downcase | replace:' ','' }}">{{ apptag }}</a>
                {% endfor %}
              </span>
            </li>
        {% endif %}
      </ul>
      {% if page.section == 'solutions' %}
      <ul>
          <li><a href="{{ apps_entry_point }}">Solutions Bank</a></li>
       </ul>
      {% endif %}
    </li>








    <li {% if page.url contains 'community' %}class="Selected"{% endif %}>
      <a href="{{ community_entry_point }}">Community</a>




</nav>
